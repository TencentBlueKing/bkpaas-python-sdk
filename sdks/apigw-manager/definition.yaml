release:
  # 发布版本号，
  # 资源配置更新，需更新此版本号才会发布资源版本，此版本号和 sdk 版本号一致，错误设置会影响调用方使用
  version: 1.0.0
  # 版本标题
  title: ""
  # 版本描述
  comment: ""

apigateway:
  description: "描述"
  description_en: "英文描述"
  is_public: true
  # 标记网关为官方网关，网关名需以 `bk-` 开头，可选
  api_type: 1
  # 应用请求网关时，是否允许从请求参数 (querystring, body) 中获取蓝鲸认证信息，默认值为 true；
  # 如果为 false，则只能从请求头 X-Bkapi-Authorization 获取蓝鲸认证信息；
  # 新接入的网关，可以设置为 false，已接入的网关，待推动所有调用者将认证信息放到请求头后，可设置为 false
  allow_auth_from_params: false
  # 网关请求后端时，是否删除请求参数 (querystring, body) 中的蓝鲸认证敏感信息，比如 bk_token，为 true 表示允许删除；
  # 待请求网关的所有调用者，将认证参数放到请求头 X-Bkapi-Authorization 时，可将此值设置为 false
  allow_delete_sensitive_params: false
  maintainers:
    - "admin"

stage:
  name: "prod"
  description: "描述"
  description_en: "英文描述"
  # 环境变量
  vars:
    key: "value"
  # 代理配置
  proxy_http:
    timeout: 60
    # 负载均衡类型 + Hosts
    upstreams:
      loadbalance: "roundrobin"
      hosts:
        - host: "http://127.0.0.1"
          weight: 100
    # Header转换
    transform_headers:
      # 设置Headers
      set:
        X-Token: "token"
  # 流量控制
  rate_limit:
    enabled: false
    rate:
      tokens: 5000
      period: 60

# 主动授权，网关主动给应用，添加访问网关所有资源的权限
grant_permissions:
  - bk_app_code: "{{ settings.BK_APP_CODE }}"

# 应用申请指定网关所有资源的权限，待网关管理员审批后，应用才可访问网关资源
apply_permissions:
  - api_name: "{{ settings.BK_APIGW_NAME }}"

# 网关资源，建议资源配置采用单独的配置文件，可通过网关管理端导出资源配置
# resources:
#   swagger: "2.0"
#   paths: []

# 资源文档
# 资源文档的目录格式样例如下，en 为英文文档，zh 为中文文档，创建归档文件可使用指令 `tar czvf xxx.tgz en zh`：
# ./
# - en
#   - get_user.md
# - zh
#   - get_user.md
resource_docs:
  # 资源文档的归档文件，可为 tar.gz，zip 格式文件
  archivefile: "{{ settings.BK_APIGW_RESOURCE_DOCS_ARCHIVE_FILE }}"
  # 资源文档目录，basedir 与 archivefile 二者至少一个有效，若同时存在，则 archivefile 优先
  basedir: "{{ settings.BK_APIGW_RESOURCE_DOCS_BASE_DIR }}"
